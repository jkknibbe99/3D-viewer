
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>STL Viewer</title>
    
    <!-- Bootstrap CSS -->
    <link href="./css/bootstrap.css" rel="stylesheet">

    <!-- Imbedded style -->
    <style>
        body {
            margin: 0;
        }

        #gui {
            position: fixed;
            text-align: center;
        }
    </style>

    <!-- Import maps -->
    <!-- <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.161.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.161.0/examples/jsm/"
            }
        }
    </script> -->
    <script type="importmap">
        {
            "imports": {
                "three": "./js/three.js"
            }
        }
    </script>

    <!-- jQuery -->
    <script src="./js/jquery-3.7.0.min.js"></script>
</head>

<body>
    <div id="gui" class="row g-3 p-3">
        <form id="file-select-form" class="col-auto">
            <select id="file-select" class="form-select" name="file">
                <option>...</option>
                <option>B tower.stl</option>
                <option>forks.stl</option>
                <option>pallet.stl</option>
            </select>
        </form>
        <div class="col-auto">
            <button class="btn btn-secondary" id="wrfrm-tgl-btn">Toggle Wireframe</button>
        </div>
    </div>
    <script>
        // onchange submit
        $('#file-select').on('change', function () {
            $('#file-select-form').submit();
        })

        // Get file
        const urlParams = new URLSearchParams(window.location.search);
        const file = urlParams.get('file')
        if (file == '...') {
            location.href = '/';
        } else if (!file) {
            $('#file-select-form').css('margin-left', 'calc(50vw - 100px)');
            $('#file-select-form').css('width', '200px');
            $('#file-select-form').prepend('<label for="file-select" class="pb-2"><strong>Select a file to view</strong></label>');
            $('#wrfrm-tgl-btn').hide();
        }

        // Set selected file
        $('#file-select option').each(function (index) {
            if ($(this).val() == file) {
                $(this).prop('selected', true);
            }
        });
    </script>
    <script type="module" src="./js/main.js?v=1.2"></script>
</body>

</html>